% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mcmc_parcel_mcmc_kernels.R
\name{filter_blocks_by_lcc_fraction}
\alias{filter_blocks_by_lcc_fraction}
\title{Filter blocks by LCC fraction constraint}
\usage{
filter_blocks_by_lcc_fraction(
  block_ids,
  library,
  total_capacity,
  lcc_capacity,
  min_lcc_fraction = 0.5
)
}
\arguments{
\item{block_ids}{Integer vector of compatible block IDs}

\item{library}{Secondary library (with $metadata$capacity)}

\item{total_capacity}{Current total capacity}

\item{lcc_capacity}{Current LCC capacity}

\item{min_lcc_fraction}{Minimum LCC fraction constraint (default 0.5)}
}
\value{
List with:
\itemize{
\item filtered_ids: block IDs that won't violate constraint
\item n_filtered: number of blocks removed
}
}
\description{
Pre-filters compatible blocks to exclude those that would definitely violate
min_lcc_fraction if added. Used by toggle kernel to avoid wasted proposals.
}
\details{
When adding a secondary block:
\itemize{
\item LCC capacity stays constant
\item Total capacity increases by block capacity
\item LCC fraction decreases: new_frac = lcc_cap / (total_cap + block_cap)
}

We keep blocks where: lcc_cap >= (total_cap + block_cap) * min_lcc_fraction
Equivalently: block_cap <= lcc_cap / min_lcc_fraction - total_cap
}
