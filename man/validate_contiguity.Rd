% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gis_operations.R
\name{validate_contiguity}
\alias{validate_contiguity}
\title{Validate District Contiguity}
\usage{
validate_contiguity(
  district_sf,
  min_contiguous_pct = 0.5,
  min_portion_acres = 5
)
}
\arguments{
\item{district_sf}{An sf object representing the compliance district geometry.
Must be in EPSG:26986 projection.}

\item{min_contiguous_pct}{Minimum percentage of district area that must be
contiguous (default: 0.5 for 50\%).}

\item{min_portion_acres}{Minimum area in acres for each non-contiguous portion
(default: 5 acres).}
}
\value{
A list with detailed contiguity analysis:
\describe{
\item{is_valid}{Logical, TRUE if district meets all contiguity requirements}
\item{contiguous_pct}{Numeric, percentage (0-1) of district area in largest
contiguous portion}
\item{n_portions}{Integer, number of separate contiguous portions}
\item{portion_areas}{Numeric vector, area of each portion in acres (sorted
largest to smallest)}
\item{violations}{Character vector, descriptions of any violations (empty
if no violations)}
}
}
\description{
Check if a compliance district meets contiguity requirements: at least 50\%
of district area must be in a single contiguous portion, and all non-contiguous
portions must be at least 5 acres each.
}
\details{
The MBTA Communities Act contiguity requirements (760 CMR 59.04(3)(d)):
\enumerate{
\item At least 50\% of district area must be in a single contiguous portion
\item Each non-contiguous portion must be at least 5 acres
}

The function identifies contiguous portions using connected component analysis:
\enumerate{
\item Union all district features into single geometry
\item Cast to separate POLYGON geometries (splits into portions)
\item Calculate area of each portion
\item Check percentage in largest portion
\item Check minimum size for all other portions
}

\strong{Important:} Multi-polygon features can have internal holes/donuts, so
the number of features â‰  number of contiguous portions. For example, Somerville's
district has 7 features but 13 separate contiguous portions.
}
\section{NA Handling}{

Returns list with is_valid = NA if:
\itemize{
\item District geometry is empty or invalid
\item District area is 0
}
}

\examples{
\dontrun{
# Load a district
district <- sf::st_read("district.shp")
district <- sf::st_transform(district, 26986)

# Validate contiguity
result <- validate_contiguity(district)

if (result$is_valid) {
  cat("District meets contiguity requirements\n")
} else {
  cat("Violations:\n")
  cat(paste("-", result$violations, collapse = "\n"))
}

# Custom thresholds
result <- validate_contiguity(
  district,
  min_contiguous_pct = 0.75,  # 75\% instead of 50\%
  min_portion_acres = 10       # 10 acres instead of 5
)
}

}
\seealso{
\code{\link{calculate_district_area}}
}
