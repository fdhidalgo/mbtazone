% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gis_operations.R
\name{calculate_density_denominator}
\alias{calculate_density_denominator}
\title{Calculate Density Denominator}
\usage{
calculate_density_denominator(
  district_sf,
  deduction_layers,
  output_unit = c("acres", "sqft")
)
}
\arguments{
\item{district_sf}{An sf object representing the compliance district geometry.
Must be in EPSG:26986 projection.}

\item{deduction_layers}{An sf object containing density denominator deduction
geometries (highways, railroads, water, etc.). Must be in EPSG:26986 projection.}

\item{output_unit}{Character string specifying output units: "acres" (default)
or "sqft" (square feet).}
}
\value{
Numeric value representing gross density denominator area (total district
area minus deductions) in specified units. Returns total district area if
no deductions apply.
}
\description{
Calculate the gross density denominator for a compliance district by subtracting
density deductions (highways, railroads, water bodies, etc.) from total district
area. Used to calculate minimum gross density (units per acre).
}
\details{
The gross density denominator is calculated as:
\deqn{Density Denominator = Total District Area - Deductions}

Deductions typically include:
\itemize{
\item Limited access highways
\item Railroad rights-of-way
\item Water bodies
\item Certain protected lands
}

The state provides a statewide Density Denominator Deductions layer
(available via \code{load_density_deductions()}) that includes all applicable
deduction types.

The density denominator is used to calculate minimum gross density:
\deqn{Gross Density = Required Units / Density Denominator (acres)}
}
\section{NA Handling}{

\itemize{
\item Returns NA if district geometry is empty or invalid
\item Returns total district area if deduction layers are empty (no deductions)
\item Ensures result is non-negative (minimum 0)
}
}

\examples{
\dontrun{
# Load district and deduction layers
district <- sf::st_read("district.shp")
district <- sf::st_transform(district, 26986)
deductions <- load_density_deductions()

# Calculate density denominator
dd_acres <- calculate_density_denominator(
  district,
  deductions,
  output_unit = "acres"
)

# Calculate gross density
required_units <- 750
gross_density <- required_units / dd_acres
cat("Required gross density:", gross_density, "units/acre\n")
}

}
\seealso{
\code{\link{calculate_district_area}}, \code{\link{load_density_deductions}}
}
