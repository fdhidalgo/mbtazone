% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compliance_pipeline.R
\name{evaluate_compliance}
\alias{evaluate_compliance}
\title{Evaluate MBTA Communities Act Compliance}
\usage{
evaluate_compliance(
  municipality,
  districts,
  zoning_params,
  community_type,
  transit_stations = NULL,
  density_deductions = NULL,
  community_name = NULL,
  custom_requirements = NULL,
  precomputed = FALSE,
  verbose = TRUE
)
}
\arguments{
\item{municipality}{An sf object containing parcel data (from
\code{\link{load_municipality}})}

\item{districts}{District specification (see \code{\link{assign_parcels_to_districts}}
for supported formats): sf polygon(s), column name, or named list}

\item{zoning_params}{Named list (or list of lists for multiple districts) of
zoning parameters from \code{\link{extract_zoning_parameters}}}

\item{community_type}{Required character string: "rapid_transit", "commuter_rail",
"adjacent", or "adjacent_small_town"}

\item{transit_stations}{Optional sf object with transit station buffers (from
\code{\link{load_transit_stations}}). Required for accurate station area
calculations for rapid_transit and commuter_rail communities.}

\item{density_deductions}{Optional sf object with density deduction polygons
(from \code{\link{load_density_deductions}}). Required for accurate gross
density calculations.}

\item{community_name}{Optional community name for loading specific requirements}

\item{custom_requirements}{Optional list to override community requirements}

\item{precomputed}{Logical indicating whether parcels have pre-computed spatial
attributes (default: FALSE). If TRUE, expects columns created by
\code{\link{precompute_spatial_attributes}} and skips spatial operations for
performance. See Details for simulation workflow.}

\item{verbose}{Logical indicating whether to print progress messages (default: TRUE)}
}
\value{
Named list with complete compliance evaluation results:
\describe{
\item{summary}{List with overall metrics and compliance status}
\item{by_district}{Data frame with metrics for each district}
\item{parcel_detail}{sf object with all parcels and calculation columns}
\item{compliance}{Detailed compliance check results}
\item{metadata}{Evaluation metadata (date, package version, etc.)}
}
}
\description{
Main API function to perform complete compliance evaluation for a municipality.
Orchestrates all package components: data loading, district assignment, unit
capacity calculations, and compliance assessment.
}
\details{
This function performs the complete compliance evaluation workflow:

\strong{Step 1: District Assignment}
Assigns parcels to districts using the flexible input method provided.

\strong{Step 2: Unit Capacity Calculation}
Applies all 18 unit capacity calculations to each parcel using
\code{\link{calculate_district_capacity}}.

\strong{Step 3: District Metrics}
Calculates district-level summary metrics:
\itemize{
\item Total unit capacity
\item Total land area
\item Developable land area
\item Gross density (with density denominator deductions)
\item Station area metrics (if applicable)
}

\strong{Step 4: Compliance Evaluation}
Evaluates all 6 compliance requirements using
\code{\link{check_compliance_requirements}}.
}
\examples{
\dontrun{
# Load data
parcels <- load_municipality("cambridge.zip")
stations <- load_transit_stations()
deductions <- load_density_deductions()

# Get zoning parameters
params <- extract_zoning_parameters("cambridge_model.xlsx", district = 1)

# Define district boundary
district_boundary <- sf::st_read("district.shp")

# Evaluate compliance
result <- evaluate_compliance(
  municipality = parcels,
  districts = district_boundary,
  zoning_params = params,
  community_type = "rapid_transit",
  transit_stations = stations,
  density_deductions = deductions,
  custom_requirements = list(min_units = 6240, min_acres = 50)
)

# View results
result$summary$compliant
result$compliance$summary
result$by_district
}

}
