% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/unit_capacity_calculations.R
\name{calculate_final_unit_capacity}
\alias{calculate_final_unit_capacity}
\title{Calculate Final Unit Capacity}
\usage{
calculate_final_unit_capacity(
  units_building_capacity,
  units_density_limits,
  units_lot_coverage,
  units_lot_area_req,
  units_far_limits,
  units_max_cap,
  units_graduated_lots
)
}
\arguments{
\item{units_building_capacity}{Numeric vector of units from building capacity
(floor area divided by 1000 sq ft per unit)}

\item{units_density_limits}{Numeric vector of units from density limits
(lot area times max units per acre)}

\item{units_lot_coverage}{Numeric vector of units from lot coverage limits
(coverage area times building height divided by 1000)}

\item{units_lot_area_req}{Numeric vector of units from lot area requirements
(lot area divided by area per unit)}

\item{units_far_limits}{Numeric vector of units from FAR limits
(lot area times FAR divided by 1000)}

\item{units_max_cap}{Numeric vector of adjusted units (capped by max units per lot)}

\item{units_graduated_lots}{Numeric vector of units from graduated lot sizing}
}
\value{
Numeric vector of final unit capacities. Values below 2.5 become 0,
values 2.5-3.0 become 3, others are rounded to nearest integer. Returns NA
if all constraint methods are NA.
}
\description{
Determines the final allowable housing unit capacity by taking the minimum
of all applicable zoning constraint methods. This is the culminating
calculation (Excel column AF) that determines compliance capacity.
}
\details{
This function implements the "minimum of methods" approach required by the
MBTA Communities Act. It evaluates 7 different zoning constraint methods
and takes the most restrictive (minimum) value for each parcel.

The 7 methods correspond to Excel columns X, Y, Z, AA, AB, AC, and AE.
NA values are treated as unlimited (Inf) during minimum calculation, unless
all methods are NA, in which case NA is returned.

Final rounding rules:
\itemize{
\item < 2.5 units → 0 (below threshold)
\item 2.5 to 3.0 units → 3 (minimum viable)
\item 3.0 units → rounded to nearest integer
}
}
\examples{
# Single parcel with all methods applicable
calculate_final_unit_capacity(
  units_building_capacity = 5.2,
  units_density_limits = 4.8, 
  units_lot_coverage = 6.1,
  units_lot_area_req = 3.9,
  units_far_limits = 4.2,
  units_max_cap = 5.0,
  units_graduated_lots = 4.5
)
# Returns: 4 (minimum is 3.9, rounded to 4)

# Multiple parcels with some NA constraints
calculate_final_unit_capacity(
  units_building_capacity = c(5.2, 2.1, NA),
  units_density_limits = c(4.8, NA, NA),
  units_lot_coverage = c(6.1, 1.8, NA), 
  units_lot_area_req = c(3.9, 2.3, NA),
  units_far_limits = c(4.2, NA, NA),
  units_max_cap = c(5.0, 2.0, NA),
  units_graduated_lots = c(4.5, 2.2, NA)
)
# Returns: c(4, 0, NA)

}
