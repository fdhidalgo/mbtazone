% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/smc_particle.R
\name{calculate_valuation}
\alias{calculate_valuation}
\title{Calculate Valuation Function V(x)}
\usage{
calculate_valuation(particle, map, alpha_V = 1, beta_V = 1)
}
\arguments{
\item{particle}{A ParticleState object}

\item{map}{An mbta_map object}

\item{alpha_V}{Exponent for capacity ratio in valuation (default: 1.0)}

\item{beta_V}{Exponent for station coverage ratio in valuation (default: 1.0)}
}
\value{
Numeric valuation score V(x) >= 0
}
\description{
Calculate the valuation score for a particle, used to guide intermediate
resampling. The valuation function estimates the potential of a partial
plan to reach a compliant final state.
}
\details{
\subsection{Valuation Function Formula}{

Per PRD Section 4.3.4:

\if{html}{\out{<div class="sourceCode">}}\preformatted{V(x) = (Reachable_Capacity / Target_Capacity)^α_V ×
       (Reachable_Station_Coverage / Target_Coverage)^β_V
}\if{html}{\out{</div>}}

Where:
\itemize{
\item \code{Reachable_Capacity = total_capacity + remaining_capacity}
\item \code{Reachable_Station_Coverage = max_station_area / max_area}
}
}

\subsection{Behavior}{
\itemize{
\item Higher V(x) = more potential to reach compliance
\item Particles with low V(x) are downweighted during resampling
\item Particles expanding into low-capacity or low-station areas get lower V(x)
}
}

\subsection{Station Coverage Component}{

Only included if \code{map$station_area_land_pct > 0} (e.g., rapid transit,
commuter rail). Adjacent communities have no station requirement, so V(x)
only considers capacity.
}

\subsection{Tuning Parameters}{
\itemize{
\item \code{alpha_V = 1.0}: Linear weighting of capacity potential
\item \code{beta_V = 1.0}: Linear weighting of station coverage potential
\item Higher values increase influence of that factor
}
}
}
\examples{
\dontrun{
# Calculate valuation after adding parcel
particle <- add_parcel_to_particle(particle, next_id, map, prob)
valuation <- calculate_valuation(particle, map)
print(valuation)
}

}
\keyword{internal}
